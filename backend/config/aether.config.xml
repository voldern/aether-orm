<config>
    <site name="*">
        <import>searchpath.xml</import>
        <option name="session">on</option>
        <option name="locale">nb_NO.UTF-8</option>
        <option name="loginRequired">true</option>
        <option name="logoutRequired">false</option>
        <urlRules>
            <section>Generic</section>
            <module provides="auth">PGAuth</module>
            <module provides="header">PGHeader</module>
            <module provides="footer">PGFooter</module>
            <rule match="">
                <template>generic.tpl</template>
                <module>ProductSearch</module>
                <option name="loginRequired">false</option>
                <option name="selectedSection">home</option>
            </rule>
            <rule match="products">
                <option name="selectedSection">products</option>
                <module provides="entity">Entity</module>
                <module provides="details">Details</module>
                <rule pattern="/[0-9]+/" store="product_id">
                    <template>generic.tpl</template>
                    <section>Generic</section>
										<module>ImageImport</module>
                    <module provides="content">Product</module>
                    <option name="javascripts">/js/product.js</option>
                </rule>
                <rule match="">
                    <template>products.tpl</template>
                    <section>Generic</section>
                    <module provides="add">ProductAdd</module>
                    <module provides="latest">ProductLatest</module>
                    <option name="javascripts">/js/products.js</option>
                </rule>
            </rule>
            <rule match="details">
                <option name="selectedSection">details</option>
                <module provides="details">Details</module>
                <option name="javascripts">/js/details.js</option>
                <rule match="set">
                    <rule pattern="/[0-9]+/" store="set_id">
                        <template>generic.tpl</template>
                        <section>Generic</section>
                    </rule>
                </rule>
                <rule pattern="/[0-9]+/" store="detail_id">
                    <template>generic.tpl</template>
                    <section>Generic</section>
                </rule>
                <rule match="">
                    <template>details.tpl</template>
                    <section>Generic</section>
                </rule>
            </rule>
            <rule match="login">
                <template>generic.tpl</template>
                <option name="selectedSection">login</option>
                <option name="loginURL">https://auth.tek.no/</option>
                <module provides="content">PGLogin</module>
                <option name="loginRequired">false</option>
            </rule>
            <rule match="logout">
                <module>PGLogout</module>
            </rule>
            <rule match="password">
                <template>generic.tpl</template>
                <option name="loginURL">https://auth.tek.no/</option>
                <option name="javascripts">/js/password.js</option>
                <rule match="change">
                    <module provides="content">PGPasswordChange</module>
                </rule>
                <rule match="onetime">
                    <option name="loginRequired">false</option>
                    <option name="logoutRequired">true</option>
                    <module provides="content">PGPasswordOnetime</module>
                </rule>
            </rule>
            <rule match="">
            </rule>
        </urlRules>
    </site>
</config>
